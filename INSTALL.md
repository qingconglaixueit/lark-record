# Chrome扩展安装指南

本指南将详细说明如何将飞书记录助手安装到Chrome浏览器中。

## 📋 前置准备

在安装扩展之前，请确保：

- [ ] 已完成项目代码的获取
- [ ] 已启动Go后端服务（运行 `start.bat`）
- [ ] Chrome浏览器版本 ≥ 88

## 🔨 第一步：生成图标文件

扩展需要图标文件才能正常显示。请按以下步骤生成：

### 方法1：使用图标生成工具（推荐）

1. 在浏览器中打开 [`icons/create-icons.html`](icons/create-icons.html:1)
2. 页面会自动生成三个尺寸的图标预览
3. 点击"下载所有图标"按钮
4. 将下载的三个文件保存到 `icons` 目录：
   - `icon16.png`
   - `icon48.png`
   - `icon128.png`

### 方法2：手动创建图标（临时方案）

如果无法使用图标生成工具，可以创建临时图标文件：

1. 找任意PNG图片
2. 使用图片编辑软件（如画图、Photoshop）调整尺寸：
   - 复制为16x16像素，命名为 `icon16.png`
   - 复制为48x48像素，命名为 `icon48.png`
   - 复制为128x128像素，命名为 `icon128.png`
3. 将三个文件保存到 `icons` 目录

**注意**：如果没有图标文件，扩展仍然可以加载，但图标会显示为默认样式。

## 🌐 第二步：加载Chrome扩展

### 方法1：通过扩展管理页面加载（推荐）

1. **打开Chrome扩展管理页面**
   
   在浏览器地址栏输入：
   ```
   chrome://extensions/
   ```
   
   或者：
   - 点击Chrome浏览器右上角的"三个点"菜单
   - 选择"更多工具" → "扩展程序"

2. **启用开发者模式**
   
   在扩展管理页面右上角，找到"开发者模式"开关并打开它。

3. **加载已解压的扩展程序**
   
   - 点击左上角的"加载已解压的扩展程序"按钮
   - 在弹出的文件选择窗口中，导航到项目根目录（包含 `manifest.json` 的目录）
   - 选中整个项目文件夹并点击"选择文件夹"

4. **确认扩展已加载**
   
   - 扩展加载成功后，会在扩展列表中看到"飞书记录助手"
   - 浏览器右上角的工具栏会出现扩展图标

### 方法2：通过命令行加载（高级用户）

1. 启动Chrome时添加参数：
   ```bash
   chrome.exe --load-extension="d:\mycode\lark-record"
   ```

## ✅ 第三步：验证扩展安装

### 1. 检查扩展状态

在扩展管理页面，确保：
- ✅ "飞书记录助手"显示在扩展列表中
- ✅ 扩展状态为"已启用"
- ✅ 没有错误提示

### 2. 测试扩展功能

1. **点击扩展图标**
   
   点击浏览器工具栏中的飞书记录助手图标，应该弹出Popup界面。

2. **测试配置页面**
   
   - 右键点击扩展图标
   - 选择"选项"
   - 应该打开配置页面

3. **检查后台服务**
   
   - 在扩展管理页面，点击"Service Worker"
   - 查看后台日志，确认没有错误

## 🎨 第四步：自定义扩展图标（可选）

如果想要自定义扩展图标：

1. 准备三个尺寸的PNG图片：
   - 16x16像素（小图标）
   - 48x48像素（中图标）
   - 128x128像素（大图标）

2. 替换 `icons` 目录下的对应文件

3. 重新加载扩展：
   - 在扩展管理页面，点击扩展卡片上的刷新按钮
   - 或者禁用后重新启用扩展

## 🔧 第五步：调试和排错

### 常见安装问题

#### 问题1：扩展加载失败

**症状**：点击"加载已解压的扩展程序"后没有反应或报错

**可能原因**：
- `manifest.json` 文件格式错误
- 缺少必需的文件
- 文件路径不正确

**解决方案**：
1. 检查 `manifest.json` 是否存在且格式正确
2. 确认所有引用的文件都存在
3. 查看扩展管理页面中的错误信息

#### 问题2：图标显示异常

**症状**：扩展图标显示为默认样式或空白

**可能原因**：
- 图标文件不存在
- 图标文件格式不正确

**解决方案**：
1. 确认 `icons` 目录下有三个PNG文件
2. 检查图标文件名是否正确
3. 重新加载扩展

#### 问题3：Popup无法打开

**症状**：点击扩展图标后没有反应

**可能原因**：
- `popup.html` 文件不存在
- JavaScript错误
- 后端服务未启动

**解决方案**：
1. 检查 `popup.html` 和 `popup.js` 是否存在
2. 打开开发者工具（F12）查看控制台错误
3. 确认后端服务已启动（http://localhost:8080）

#### 问题4：配置页面无法打开

**症状**：右键菜单中没有"选项"或点击无反应

**可能原因**：
- `options.html` 文件不存在
- 权限问题

**解决方案**：
1. 检查 `options.html` 是否存在
2. 通过扩展管理页面点击"详细信息" → "扩展程序选项"打开

### 开发者工具使用

#### 查看Popup页面

1. 右键点击扩展图标
2. 选择"检查弹出内容"
3. 打开开发者工具进行调试

#### 查看后台脚本

1. 在扩展管理页面
2. 找到"飞书记录助手"扩展
3. 点击"Service Worker"链接
4. 查看后台日志和错误

#### 查看网络请求

1. 打开Popup或配置页面的开发者工具（F12）
2. 切换到"Network"标签
3. 执行操作
4. 查看HTTP请求和响应

## 🔄 第六步：更新扩展

当代码更新后，需要重新加载扩展：

### 方法1：通过扩展管理页面

1. 打开 `chrome://extensions/`
2. 找到"飞书记录助手"扩展
3. 点击扩展卡片上的刷新按钮 🔄

### 方法2：通过代码编辑器

1. 在VSCode或其他编辑器中修改代码
2. 保存文件
3. 返回扩展管理页面，点击刷新

### 方法3：完全重新加载

1. 先点击"移除"按钮移除扩展
2. 重新执行"加载已解压的扩展程序"

## 📝 第七步：卸载扩展

如果需要卸载扩展：

1. 打开 `chrome://extensions/`
2. 找到"飞书记录助手"扩展
3. 点击"移除"按钮
4. 确认删除

## 🎉 安装完成！

扩展安装完成后，您可以：

1. **开始使用**：点击扩展图标开始记录数据
2. **配置应用**：参考 [`QUICKSTART.md`](QUICKSTART.md:1) 完成飞书应用配置
3. **查看文档**：阅读 [`README.md`](README.md:1) 了解完整功能

## 📚 相关文档

- [`README.md`](README.md:1) - 项目完整文档
- [`QUICKSTART.md`](QUICKSTART.md:1) - 快速入门指南
- [`TESTING.md`](TESTING.md:1) - 测试指南
- [`PROJECT_STRUCTURE.md`](PROJECT_STRUCTURE.md:1) - 项目结构说明

## 💡 提示

- **首次安装**：首次安装后，扩展会自动打开配置页面
- **权限提示**：扩展需要storage和activeTab权限，请允许
- **后端服务**：使用扩展前，必须先启动Go后端服务
- **图标问题**：没有图标文件也可以正常使用，只是图标不显示

---

如果遇到其他问题，请查看 [`TESTING.md`](TESTING.md:1) 中的问题排查部分。