# 飞书记录助手 - 快速入门指南

本指南将帮助您在10分钟内完成飞书记录助手的安装和配置。

## 📋 前置准备

在开始之前，请确保您已准备好：

1. ✅ **Chrome浏览器**（88或更高版本）
2. ✅ **Go环境**（1.21或更高版本）[下载](https://golang.org/dl/)
3. ✅ **飞书开发者账号** [注册](https://open.feishu.cn/)

## 🚀 快速开始（5步完成）

### 第一步：获取飞书应用凭证（3分钟）

1. 访问 [飞书开放平台](https://open.feishu.cn/)
2. 点击"创建应用"，选择"企业自建应用"
3. 填写应用信息：
   - 应用名称：飞书记录助手
   - 应用描述：用于快速记录数据到飞书多维表格
4. 创建成功后，复制以下信息：
   - **App ID**：`cli_xxxxxxxxxxxxxxxx`
   - **App Secret**：点击"查看"获取

### 第二步：配置飞书应用权限（2分钟）

1. 在应用管理页面，点击"权限管理"
2. 搜索并添加以下权限：

   | 权限名称               | 权限ID                     |
   | ---------------------- | -------------------------- |
   | 以只读方式获取多维表格 | bitable:app:readonly       |
   | 获取多维表格           | bitable:app                |
   | 云文档-只读            | drive:drive:readonly       |
   | 云文档                 | drive:drive                |
   | 发送消息               | im:message                 |
   | 获取与读取用户信息     | contact:user.base:readonly |

   **重要提示**：
   - 必须同时添加 `drive:drive:readonly` 和 `drive:drive` 权限，否则无法获取多维表格列表
   - 确保这些权限都已申请并审核通过

3. 点击"申请权限"并完成权限申请流程
4. 在"版本管理与发布"中，点击"创建版本"
5. 填写版本信息并点击"申请发布"
6. 等待应用管理员审核通过（通常几分钟内）

### 第三步：启动后端服务（1分钟）

1. 双击运行 `start.bat` 文件
2. 等待服务启动成功，看到以下提示：
   ```
   ========================================
   启动后端服务...
   服务地址: http://localhost:8080
   按 Ctrl+C 停止服务
   ========================================
   ```
3. 保持此窗口打开，不要关闭

### 第四步：安装Chrome扩展（1分钟）

1. 打开Chrome浏览器，访问 `chrome://extensions/`
2. 打开右上角的"开发者模式"开关
3. 点击"加载已解压的扩展程序"
4. 选择项目文件夹（包含`manifest.json`的目录）
5. 扩展安装成功！浏览器工具栏会出现飞书记录助手的图标

### 第五步：配置扩展（3分钟）

1. 点击扩展图标，选择"选项"
2. 填写飞书应用信息：
   - **应用ID**：粘贴第一步获取的App ID
   - **应用密钥**：粘贴第一步获取的App Secret
3. 点击"测试配置"，确认配置有效
4. 点击"加载多维表格"
5. 从列表中选择要使用的多维表格
6. 选择数据表并配置字段：
   - **待写入字段**：勾选需要用户输入的字段（至少一个）
   - **需检测的字段**：勾选需要检测是否完成的字段（可选）
   - **群聊ID**：填写要接收通知的群聊ID（可选）
7. 点击"保存配置"

## 🎉 开始使用

配置完成后，您就可以开始使用了！

### 记录数据

1. 点击扩展图标
2. 选择要使用的多维表格
3. 在输入框中填写待写入字段的值
4. 点击"记录数据"
5. 数据将被添加到飞书多维表格

### 接收通知

当记录的其他字段（需检测的字段）全部有值时：
- 系统会自动检测到字段完成
- 向配置的群聊发送完成通知消息

## 🔧 常见问题

### Q1: 如何获取群聊ID？

1. 打开飞书客户端
2. 进入目标群聊
3. 右键点击群聊名称，选择"复制群ID"
4. 将复制的ID粘贴到配置页面

### Q2: 配置测试失败怎么办？

请检查：
- App ID和App Secret是否正确
- 飞书应用是否已审核通过
- 后端服务是否已启动
- 是否具有足够的权限

### Q3: 找不到多维表格？

请确认：
- 飞书应用是否已授予相关权限
- 您是否有权限访问该多维表格
- 多维表格是否存在于知识库、个人云文档或您创建的文档中

### Q4: 如何查看数据？

1. 打开飞书客户端
2. 进入对应的多维表格
3. 查看新添加的记录

## 📚 进阶使用

### 管理多个多维表格

您可以在配置页面切换不同的多维表格，但同一时间只能激活一个配置。

### 自定义字段检测

根据业务需求，您可以灵活配置需要检测的字段，只有当这些字段全部有值时才会发送通知。

### 团队协作

飞书应用支持多用户使用，团队成员都可以使用这个扩展来记录数据。

## 🛠️ 技术支持

如遇到问题，请查看：
- 详细文档：[README.md](README.md)
- 常见问题：[README.md](README.md#常见问题)

## 📝 注意事项

1. **保持后端运行**：使用扩展时，必须保持后端服务窗口打开
2. **权限管理**：确保飞书应用具有足够的权限
3. **数据安全**：妥善保管App Secret等敏感信息
4. **网络环境**：确保能访问飞书API（open.feishu.cn）

## 🎯 下一步

- 查看 [README.md](README.md) 了解完整功能
- 查看 [API文档](backend/handlers/lark_handler.go) 了解接口详情
- 参与项目贡献，提交Issue或PR

---

祝您使用愉快！🚀