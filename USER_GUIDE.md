# 飞书记录助手 - 用户指南

## 项目介绍

飞书记录助手是一个帮助用户快速记录飞书内容到多维表格的工具，包含后端服务和Chrome浏览器插件。

## 目录结构

```
├── backend/          # 后端服务代码
├── dist/             # 编译后的可执行文件（构建后生成）
├── docs/             # 文档
├── icons/            # 插件图标
├── options/          # 插件选项页面
├── popup/            # 插件弹窗页面
├── styles/           # 样式文件
├── background/       # 插件背景脚本
├── build.sh          # 构建脚本（用于编译跨平台可执行文件）
├── start.sh          # Linux/macOS启动脚本
├── start.bat         # Windows启动脚本
└── USER_GUIDE.md     # 用户指南
```

## 快速开始

### 1. 启动后端服务

#### 方法一：使用后台启动脚本（推荐，在后台运行服务）

1. 根据您的操作系统选择启动脚本：
   - Windows: 双击 `start-backend.bat`
   - macOS/Linux: 在终端中运行 `./start-backend.sh`

2. 脚本会自动：
   - 检测操作系统并选择对应的可执行文件
   - 检查可执行文件是否存在
   - 在后台启动服务
   - 显示进程ID、服务地址和日志文件位置

3. 服务启动成功后，终端会显示类似信息：
   ```
   ✓ 后端服务已在后台启动
   ✓ 进程ID: 12345
   ✓ 服务地址: http://localhost:8080
   ✓ 日志文件: server-2023-10-01.log
   ```

#### 日志管理说明

后端服务采用自动日志管理机制：
1. **日志文件命名**：日志文件按天生成，格式为 `server-YYYY-MM-DD.log`（例如：server-2023-10-01.log）
2. **日志保留**：系统会自动保留最近15天的日志文件，超过15天的日志会被自动清理
3. **日志位置**：日志文件与可执行文件位于同一目录下
4. **日志内容**：包含服务启动时间、请求记录、错误信息等详细日志

#### 方法二：使用预编译的可执行文件（前台运行）

1. 进入 `dist` 目录，根据您的操作系统选择对应的可执行文件：
   - Windows: `lark-record-server.exe`
   - macOS: `lark-record-server-mac`
   - Linux: `lark-record-server-linux`

2. 直接双击可执行文件或在终端中运行：
   ```bash
   # Windows
   lark-record-server.exe
   
   # macOS/Linux
   ./lark-record-server-mac  # macOS
   ./lark-record-server-linux  # Linux
   ```

3. 看到以下输出表示服务启动成功：
   ```
   2026/01/24 10:09:13 服务器启动在 :8080 端口
   ```

#### 方法三：使用传统启动脚本（需要安装Go环境）

1. 确保您已安装Go 1.21或更高版本

2. 根据您的操作系统选择启动脚本：
   - Windows: 双击 `start.bat`
   - macOS/Linux: 在终端中运行 `./start.sh`

### 2. 安装Chrome浏览器插件

#### 方法一：使用提供的插件压缩包（推荐）

1. 解压 `lark-record-chrome-extension.zip` 文件到任意目录

2. 打开Chrome浏览器，进入扩展管理页面：
   - 方法1：在地址栏输入 `chrome://extensions/` 并回车
   - 方法2：点击右上角三个点 → 更多工具 → 扩展程序

3. 开启右上角的「开发者模式」

4. 点击「加载已解压的扩展程序」

5. 选择刚才解压的目录（包含manifest.json文件的目录）

6. 插件安装成功后，在Chrome右上角会出现飞书记录助手的图标

#### 方法二：直接从项目文件安装（适合开发人员）

1. 打开Chrome浏览器，进入扩展管理页面：
   - 方法1：在地址栏输入 `chrome://extensions/` 并回车
   - 方法2：点击右上角三个点 → 更多工具 → 扩展程序

2. 开启右上角的「开发者模式」

3. 点击「加载已解压的扩展程序」

4. 选择项目根目录（包含manifest.json文件的目录）

5. 插件安装成功后，在Chrome右上角会出现飞书记录助手的图标

## 配置与使用

### 1. 配置飞书应用信息

1. 点击Chrome浏览器右上角的飞书记录助手图标

2. 点击「设置」按钮

3. 填写飞书应用的App ID和App Secret
   - 如果您还没有飞书应用，请参考：[飞书开发者平台](https://open.feishu.cn/)

4. 点击「保存配置」

### 2. 使用记录功能

1. 打开飞书网页版，进入需要记录的内容页面

2. 点击Chrome浏览器右上角的飞书记录助手图标

3. 选择要记录到的多维表格和表单

4. 填写必要的信息

5. 点击「记录」按钮，内容将自动保存到飞书多维表格

## 构建说明（开发人员使用）

如果您需要自己编译后端服务，可以使用以下命令：

```bash
# Linux/macOS
./build.sh

# Windows
# 请在WSL或Git Bash等环境中运行build.sh
```

构建完成后，编译好的可执行文件将生成在 `dist` 目录中。

## 常见问题

### Q1: 服务启动失败，提示端口已被占用

A: 请检查8080端口是否被其他程序占用，可以尝试关闭占用该端口的程序，或者修改代码中的端口号。

### Q2: 插件无法正常工作

A: 请检查：
1. 后端服务是否正常启动
2. 飞书应用信息是否正确配置
3. 网络连接是否正常
4. Chrome浏览器版本是否为最新

### Q3: 记录数据时提示权限不足

A: 请检查飞书应用是否已获得以下权限：
- 多维表格读写权限
- 用户信息读取权限

## 技术支持

如果您在使用过程中遇到问题，可以通过以下方式获取帮助：

- 查看项目文档
- 检查浏览器控制台的错误信息
- 检查后端服务的日志输出

## 更新日志

- v1.0.0: 初始版本，支持基本的记录功能

## 许可证

MIT License